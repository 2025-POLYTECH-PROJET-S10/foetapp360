define("mod_hippotrack/attempt",["jquery"],(function($){return{init:function(){$(".rotation_hippotrack_container").each((function(){let rotationhippotrack_container=$(this),hippotrack_container=rotationhippotrack_container.find(".hippotrack_container");if(!hippotrack_container.length)return;let schemaType=hippotrack_container.data("schema-type");if(!schemaType)return;let targetInteriorImage=hippotrack_container.find("."+schemaType+"_interieur"),targetContourImage=hippotrack_container.find("."+schemaType+"_contour"),rotateSlider=rotationhippotrack_container.find(".rotate-slider"),moveSlider=rotationhippotrack_container.find(".move-axis-slider"),rotationAngle=0,translateDistance=0;function updateTransform(){let radian=rotationAngle*Math.PI/180,xOffset=translateDistance*Math.sin(radian),yOffset=-translateDistance*Math.cos(radian);targetInteriorImage.length&&targetInteriorImage.css("transform","translate(".concat(xOffset,"px, ").concat(yOffset,"px) rotate(").concat(rotationAngle,"deg)")),targetContourImage.length&&targetContourImage.css("transform","rotate(".concat(rotationAngle,"deg)"))}rotateSlider.on("input",(function(){rotationAngle=parseInt($(this).val(),10),updateTransform()})),moveSlider.on("input",(function(){translateDistance=parseInt($(this).val(),10),updateTransform()}))})),$(".image_cycling_hippotrack_container").each((function(){let hippotrack_container=$(this),fullPrefix=hippotrack_container.data("prefix")||"",cyclingImage=hippotrack_container.find(".hippotrack_attempt_cycling-image"),hiddenInput=hippotrack_container.find(".hippotrack_attempt_selected_position"),currentPosition=parseInt(cyclingImage.data("current"),10)||1,variation=fullPrefix.includes("_bf")?"bf":"mf",basePrefix=fullPrefix.replace(/_(bf_|mf_)$/,"");function updateImage(){let imagePath="/mod/hippotrack/pix/".concat(basePrefix,"_").concat(variation,"_").concat(currentPosition,".png");cyclingImage.attr("src",imagePath);let imageName="".concat(basePrefix,"_").concat(variation,"_").concat(currentPosition);hiddenInput.val(imageName)}hippotrack_container.find(".hippotrack_attempt_prev-btn").on("click",(function(){currentPosition=currentPosition>1?currentPosition-1:8,updateImage()})),hippotrack_container.find(".hippotrack_attempt_next-btn").on("click",(function(){currentPosition=currentPosition<8?currentPosition+1:1,updateImage()})),hippotrack_container.find(".hippotrack_attempt_toggle_btn").on("click",(function(){variation="bf"===variation?"mf":"bf",updateImage()}))}))}}}));

//# sourceMappingURL=attempt.min.js.map