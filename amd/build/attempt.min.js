define("mod_hippotrack/attempt",["jquery"],(function($){return{init:function(){$(".rotation_hippotrack_container").each((function(){let rotationhippotrack_container=$(this),hippotrack_container=rotationhippotrack_container.find(".hippotrack_container");if(!hippotrack_container.length)return;let schemaType=hippotrack_container.data("schema-type");if(!schemaType)return;let targetInteriorImage=hippotrack_container.find("."+schemaType+"_interieur"),targetContourImage=hippotrack_container.find("."+schemaType+"_contour"),rotateSlider=rotationhippotrack_container.find(".rotate-slider"),moveSlider=rotationhippotrack_container.find(".move-axis-slider"),rotationAngle=rotateSlider.val(),translateDistance=moveSlider.val();function updateTransform(){let radian=rotationAngle*Math.PI/180,xOffset=translateDistance*Math.sin(radian),yOffset=-translateDistance*Math.cos(radian);targetInteriorImage.length&&targetInteriorImage.css("transform","translate(".concat(xOffset,"px, ").concat(yOffset,"px) rotate(").concat(rotationAngle,"deg)")),targetContourImage.length&&targetContourImage.css("transform","rotate(".concat(rotationAngle,"deg)"))}updateTransform(),rotateSlider.on("input",(function(){rotationAngle=parseInt($(this).val(),10),updateTransform()})),moveSlider.on("input",(function(){translateDistance=parseInt($(this).val(),10),updateTransform()}))})),$(".image_cycling_hippotrack_container").each((function(){let hippotrack_container=$(this),fullPrefix=hippotrack_container.data("prefix")||"",cyclingImage=hippotrack_container.find(".hippotrack_attempt_cycling-image"),hiddenInput=hippotrack_container.find(".hippotrack_attempt_selected_position"),currentPosition=parseInt(cyclingImage.data("current"),10)||1,variation=fullPrefix.includes("_bf")?"bf":"mf",basePrefix=fullPrefix.replace(/_(bf_|mf_)$/,"");function updateImage(){let imagePath="/mod/hippotrack/pix/".concat(basePrefix,"_").concat(variation,"_").concat(currentPosition,".png");cyclingImage.attr("src",imagePath);let imageName="".concat(basePrefix,"_").concat(variation,"_").concat(currentPosition);hiddenInput.val(imageName)}hippotrack_container.find(".hippotrack_attempt_prev-btn").on("click",(function(){currentPosition=currentPosition>1?currentPosition-1:8,updateImage()})),hippotrack_container.find(".hippotrack_attempt_next-btn").on("click",(function(){currentPosition=currentPosition<8?currentPosition+1:1,updateImage()})),hippotrack_container.find(".hippotrack_attempt_toggle_btn").on("click",(function(){variation="bf"===variation?"mf":"bf",updateImage()}))})),$(".attempt_container").hide(),$(".hippotrack-tab.active").each((function(){$($(this).data("target")).show(),$(this).addClass("hippotrack_given_tab_input")})),$(".hippotrack-tab").click((function(){$(".hippotrack-tab").removeClass("active"),$(this).addClass("active"),$(".attempt_container").hide(),$($(this).data("target")).show()})),document.getElementById("submit_attempt").addEventListener("click",(function(event){let inputs=document.querySelectorAll("#attempt_form input[type='text']"),overlay=document.getElementById("attempt_error_overlay");overlay||(overlay=document.createElement("div"),overlay.id="attempt_error_overlay",overlay.innerHTML='\n                        <p>Veuillez remplir tous les champs.</p>\n                        <button id="attempt_close_overlay">Fermer</button>\n                    ',document.body.appendChild(overlay),document.getElementById("attempt_close_overlay").addEventListener("click",(function(){overlay.style.display="none"})));for(let input of inputs)if(""===input.value.trim())return overlay.style.display="flex",void event.preventDefault();overlay.style.display="none"}))}}}));

//# sourceMappingURL=attempt.min.js.map